<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="layui/css/layui.css" th:href="@{/layui/css/layui.css}">
</head>
<body>
    <table class="layui-table">

        <tbody>
        </tbody>
    </table>
    <div class="page"></div>


    <script src="layui/layui.js" th:src="@{/layui/layui.js}"></script>
    <script src="js/jQuery.js" th:src="@{/js/jQuery.js}"></script>
    <script>
        var total=0;
        var last=0;
        //分页传参函数
        function showReocrd(pageNo,pageSize){
            $.get("/test2",
                {
                    pageNo:pageNo,
                    pageSize:pageSize
                },
                function (date) {
                    if(date.status==200){
                        //加载后台返回的List集合数据
                        var tableData=date.data;
                        total=tableData.total;
                        last=tableData.last;
                        data=tableData.data;
                        for (var i = 0; i < data.length; i++) {
                            //alert(data[i].userName+"  "+data[i].userPassword);
                            var td = $("<td></td>").text(data[i].ip);
                            var td2 = $("<td></td>").text(data[i].id);



                            var tr = $("<tr></tr>").append(td, td2);
                            $('tbody').append(tr);
                        }
                    }else{
                        alert("数据出错");
                    }

                },
                "json"
            );
        }
        showReocrd(1,3);
        layui.use(['laypage','jquery'], function() {
            var laypage = layui.laypage,$ = layui.$;
            $(".page").each(function(i,the){
                laypage.render({
                    elem: the //注意，这里的 test1 是 ID，不用加 # 号
                    ,count: total //数据总数，从服务端得到
                    , limit: 3                      //每页显示条数
                    , curr: 1                        //起始页
                    , groups: 5                      //连续页码个数
                    , prev: '上一页'                 //上一页文本
                    , netx: '下一页'                 //下一页文本
                    , first: 1                      //首页文本
                    , last: last                     //尾页文本
                    , layout: ['prev', 'page', 'next','refresh','skip']
                    //跳转页码时调用
                    , jump: function (obj, first) { //obj为当前页的属性和方法，第一次加载first为true
                        //非首次加载 do something
                        if (!first) {
                            //清空以前加载的数据
                            $('tbody').empty();
                            //调用加载函数加载数据
                            showReocrd(obj.curr,obj.limit);
                        }
                    }
                });
            })
        })
    </script>
</body>
</html>